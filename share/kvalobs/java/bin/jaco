#!/bin/sh
# I would prefer it this way, but there does not seem to be a way to
# find out the HOME of the JDK ...
# : ${JAVA_HOME:="@@@JAVA_HOME@@@"}
# ... If there is no JDK, simply set the following ...
# : ${JRE_HOME:="$JAVA_HOME/jre"}

# ... but we have to refer to the JRE only!

MYJACORB=$KVDIR/share/kvalobs/java/lib/jacorb


: ${JRE_HOME:="/opt/java"}
JACORB_HOME=$MYJACORB

export JACORB_HOME

: ${JVM_FLAGS:=""}

echo "java: ${JAVA_HOME}/bin/java"

# call java interpreter
exec ${JAVA_HOME}/bin/java ${JVM_FLAGS} \
    -Djava.endorsed.dirs=${JACORB_HOME} -classpath ${JACORB_HOME}/jacorb.jar:${JACORB_HOME}/logkit-1.2.jar:${JACORB_HOME}/avalon-framework-4.1.5.jar:${JACORB_HOME}/concurrent-1.3.2.jar:${JACORB_HOME}/antlr-2.7.2.jar:${CLASSPATH} \
    -Djacorb.home=$KVDIR/share/kvalobs/java \
    -Dorg.omg.CORBA.ORBClass=org.jacorb.orb.ORB \
    -Dorg.omg.CORBA.ORBSingletonClass=org.jacorb.orb.ORBSingleton \
    "$@"
