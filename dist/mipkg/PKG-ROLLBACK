#! /bin/sh 

# PKG-ROLLBACK blir kalt av mipkg-rollback.
# Katalogen vi står i er samme katalog som
# .mipkg er. Alle filene skal legges inn
# med denne katalogen som root katalog.
# 
# PKG-INSTALL blir kalt på følgende måte:
#
#   PKG-INSTALL pathTilNavarendePakke pathTilRollbackPakke'
#
#   pathTilPakke er topp katalogen til pakken 
#   som installeres. 
#


echo "Dette er PKG-ROLLBACK filen!"

currentpkg=$1
rollbackpkg=$2

if [ ! -d $currentpkg -o ! -d $rollbackpkg ]; then
    echo "FATAL: PKG-ROLLBACK ble ikke kalt med en"
    echo "       gyldig referanse til pakkene som"
    echo "       er involvert i rollbacken!"
    
    exit 1
fi

$currentpkg/mipkg/PKG-UNINSTALL
$rollbackpkg/mipkg/PKG-INSTALL

exit 0
